
local GameManager = {}

local Missile = require(game.ReplicatedStorage.Module.Missile)
local RunService = game:GetService("RunService")

local activeMissiles = {}


RunService.Heartbeat:Connect(function(dt)
	
	for i = #activeMissiles, 1, -1 do
		local missile = activeMissiles[i]


		if not missile.Part then
			table.remove(activeMissiles, i)
		else
			missile:Update(dt)
		end
	end
end)


function GameManager.LaunchMissile(cible, pointDeLancement,V2)
	print("Lancement d'un missile sur " .. cible.Name)
	if V2 then
		local newMissile = Missile.MissileV2.new(cible, pointDeLancement)
		table.insert(activeMissiles, newMissile)
		return
	end
	local newMissile = Missile.Missile.new(cible, pointDeLancement)
	table.insert(activeMissiles, newMissile)
end
function GameManager:Getmissile()
	return activeMissiles
end

return GameManager
